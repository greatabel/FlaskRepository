<html>
<html>
  <head>

    <link rel="stylesheet" href="/static/game-frame-styles.css" />
    <style type="text/css">
#tbl_div div {
  visibility:hidden;
    display:none;
}

span[name*="title"] {
  background: #ffff00;
  font-weight: bold;
}

.mytitle { width:100%; display:block; line-height:1.5em; overflow:visible; 
  color: blue;
  font-size:22px; text-shadow:#f3f3f3 1px 1px 0px, #b2b2b2 1px 2px 0
}
</style>
  </head>
 
<body>
    <div class="container">
      <h1>LegalText </h1>
      <form role="form" method='POST' action='/search'>

      <label for="item">选择类型:</label>
      <select name="select_Items" id="table-select">
        {% for item in typelist %}

        <option value="tb{{ loop.index }}"> {{ item }} </option>

        {% endfor %}
      </select>



        <div id="tbl_div" class="form-group">

            <div id="tb1">
                <table border="1">
<!--                     <tr>
                        <td><span name="span_title"></span>标题:</td>
                        <td>
                          <input name="title1" value="" />
                        </td>
                    </tr>
                    <tr>
                        <td>正文:</td>
                        <td>
                          <textarea name="content1" rows="10" cols="50">
                              
                          </textarea>
                        </td>
                    </tr> -->
                    <tr>
                        <td>判决法院:<input name="case_court" value="" /></td>
                        <td>年份:<input name="case_year" value="" /></td>
                    </tr>

                    <tr>
                        <td>案号:<input name="case_id" value="" /></td>
                        <td>案由:<input name="case_cause" value="" /></td>
                    </tr>
                    <tr>
                        <td>当事人所处行业:<input name="case_industry" value="" /></td>
                        <td></td>
                    </tr>
                </table>
            </div>

            <div id="tb2">
                <table border="1">
<!--                     <tr>
                        <td><span name="span_title"></span>标题:</td>
                        <td>
                          <input name="title2" value="" />
                        </td>
                    </tr>
                    <tr>
                        <td>正文:</td>
                        <td>
                          <textarea name="content2" rows="10" cols="50">
                              
                          </textarea>
                        </td>
                    </tr> -->
                    <tr>
                        <td>法律问题归纳:<input name="memo_issue" value="" /></td>
                        <td>年份:<input name="memo_year" value="" /></td>
                    </tr>

                    <tr>
                        <td>客户所在行业:<input name="meomo_industry" value="" /></td>
                        <td></td>
                    </tr>
                </table>
            </div>

            <div id="tb3">
                <table border="1">
<!--                     <tr>
                        <td><span name="span_title"></span>标题:</td>
                        <td>
                          <input name="title3" value="" />
                        </td>
                    </tr>
                    <tr>
                        <td>正文:</td>
                        <td>
                          <textarea name="content3" rows="10" cols="50">
                              
                          </textarea>
                        </td>
                    </tr> -->
                    <tr>
                        <td>案由:<input name="evidence_cause" value="" /></td>
                        <td>客户是否为原告:<br/>
                              <input type="radio" name="evidence_plaintiff" value="1" checked="checked">是<br>
                              <input type="radio" name="evidence_plaintiff" value="0">否<br>
                        </td>
                    </tr>

                    <tr>
                        <td>当事人国籍:<input name="evidence_nation" value="" /></td>
                        <td>当事人所处行业:<input name="evidence_industry" value="" /></td>
                    </tr>
                    <tr>
                        <td>审理法院:<input name="evidence_court" value="" /></td>
                        <td></td>
                    </tr>
                </table>
            </div>

            <div id="tb4">
                <table border="1">
<!--                     <tr>
                        <td><span name="span_title"></span>标题:</td>
                        <td>
                          <input name="title4" value="" />
                        </td>
                    </tr>
                    <tr>
                        <td>正文:</td>
                        <td>
                          <textarea name="content4" rows="10" cols="50">
                              
                          </textarea>
                        </td>
                    </tr> -->
                    <tr>
                        <td>合同类型:<input name="contract_type" value="" /></td>
                        <td>合同语言:<input name="contract_language" value="" /></td>
                    </tr>

                    <tr>
                        <td>合同标的金额:<input name="contract_amount" value="" /></td>
                        <td>合同双方谈判地位:<input name="contract_position" value="" /></td>
                    </tr>
                    <tr>
                        <td>合同双方所处行业:<input name="contract_industry" value="" /></td>
                        <td></td>
                    </tr>
                </table>
            </div>


        </div>

        <br/>
        <button type="submit" class="btn btn-default" onclick="return handleSearch()">搜索</button>
      </form>


      {% for r in results %}
       <span class="mytitle"> {{ r[0] }}</span>  
        {% if r[1]|length > 300  %}
        <h4>{{ r[1][:300] }} ...</h4>
        {% else %}
        <h4>{{ r[1] }} </h4> 
        {% endif %}       
      {% endfor %}

      <br/>
      {% for error in errors %}
        <h4>{{ error }}</h4>
      {% endfor %}
    </div>


<script src="/static/jquery-3.5.1.min.js"></script>
<script src="/static/bootstrap-4.5.2-dist/js/bootstrap.min.js"></script>
<script>

jQuery(function () {
    $('#table-select').change(function () {
        $('#tbl_div > div').css('display', 'none');
        if (this.value) {
            // alert(this.value);
            $('#' + this.value).css('display', 'block');
            $('#' + this.value).css('visibility', 'visible');
            var text = $("#table-select option:selected").text();
            $("[name='span_title']").text(text);

        }
    }).change()
})

function isEveryInputEmpty(index) {
    var allEmpty = true;

    $('#tb'+ index + ' input').each(function() {
        if ($(this).val() !== '') {
            allEmpty = false;
            return false; // we've found a non-empty one, so stop iterating
        }
    });

    return allEmpty;
}

function handleSearch() {
  var index = $("#table-select option:selected").index() + 1;
  if (isEveryInputEmpty(index))
  {
      alert('所有输入框为空，请至少输入1项！');
      return false;
  }
  console.log('you can insert')

    // // alert(index);
    // if (title === "" || content === "") {
    //     alert("标题和内容不能为空");
    //     return false;
    // }
    return true;
}
</script>

  </body>
</html>